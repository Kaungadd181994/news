


> Written with [StackEdit](https://stackedit.io/).
https://github.com/Kaungadd181994/news.git


import React, { useState, useEffect } from "react";
import { View, Text, Button, TextInput, Alert, ActivityIndicator, BackHandler } from "react-native";import { NavigationContainer } from "@react-navigation/native";import { createStackNavigator } from "@react-navigation/stack";const Stack = createStackNavigator();// ============ 1️⃣ Amount Screen ============const AmountScreen = ({ navigation }) => {  const [amount, setAmount] = useState("");  const handleNext = async () => {    // Simulate API call for request txn    const fakeTxnRef = "TXN" + Math.floor(Math.random() * 10000);    const fee = 100; // simulate fee    navigation.navigate("Confirm", { txnRef: fakeTxnRef, fee, amount });  };  return (    <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>      <Text>Enter Amount</Text>      <TextInput        style={{ borderWidth: 1, width: 200, margin: 10, textAlign: "center" }}        keyboardType="numeric"        value={amount}        onChangeText={setAmount}        placeholder="Enter amount"      />      <Button title="Next ➡️" onPress={handleNext} disabled={!amount} />    </View>  );};// ============ 2️⃣ Confirm Screen ============const ConfirmScreen = ({ route, navigation }) => {  const { txnRef, fee, amount } = route.params;  const [pin, setPin] = useState("");  const handleConfirm = async () => {    // Simulate verifying PIN    navigation.navigate("Processing", { txnRef, amount });  };  return (    <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>      <Text>TxnRef: {txnRef}</Text>      <Text>Fee: {fee}</Text>      <TextInput        style={{ borderWidth: 1, width: 120, margin: 10, textAlign: "center" }}        keyboardType="numeric"        secureTextEntry        maxLength={4}        value={pin}        onChangeText={setPin}        placeholder="Enter PIN"      />      <Button title="Confirm ✅" onPress={handleConfirm} disabled={pin.length < 4} />    </View>  );};// ============ 3️⃣ Processing Screen ============const ProcessingScreen = ({ route, navigation }) => {  const { txnRef, amount } = route.params;  const [countdown, setCountdown] = useState(5);  useEffect(() => {    // Prevent back navigation    const backHandler = BackHandler.addEventListener("hardwareBackPress", () => {      Alert.alert("⚠️ Confirm", "Go back to Home?", [        { text: "Cancel", style: "cancel" },        {          text: "Yes",          onPress: () => navigation.reset({ index: 0, routes: [{ name: "Amount" }] }),        },      ]);      return true;    });    const timer = setInterval(() => {      setCountdown((prev) => (prev > 0 ? prev - 1 : 0));    }, 1000);    if (countdown === 0) {      clearInterval(timer);      Alert.alert("✅ Success", `Transaction ${txnRef} completed!`);      navigation.reset({ index: 0, routes: [{ name: "Amount" }] });    }    return () => {      backHandler.remove();      clearInterval(timer);    };  }, [countdown]);  return (    <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>      <ActivityIndicator size="large" color="green" />      <Text style={{ marginTop: 10 }}>Processing {txnRef}...</Text>      <Text>⏳ {countdown} seconds</Text>    </View>  );};// ============ Main App ============export default function App() {  return (    <NavigationContainer>      <Stack.Navigator screenOptions={{ headerShown: true }}>        <Stack.Screen name="Amount" component={AmountScreen} />        <Stack.Screen name="Confirm" component={ConfirmScreen} />        <Stack.Screen          name="Processing"          component={ProcessingScreen}          options={{ gestureEnabled: false }} // disable iOS swipe back        />      </Stack.Navigator>    </NavigationContainer>  );}
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTE5NTk5MDQ1XX0=
-->